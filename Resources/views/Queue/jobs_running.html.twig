{% extends "DtcGridBundle:Page:datatables.html.twig" %}
{% import "DtcQueueBundle:Queue:macros.html.twig" as queue_macros %}
{% block title %}DtcQueue - Admin - Running Jobs{% endblock %}
{% block grid %}
    {% include 'DtcQueueBundle:Queue:nav.html.twig' %}

    <h3>Running Jobs</h3>
    <h4><em>(Including Stalled Jobs)</em></h4>
    {{ dtc_grid.render | raw }}
    {{ queue_macros.worker_method_button('Prune Stalled', 'dtc_queue_prune_stalled', workers_methods, 'This will prune (archive) all stalled jobs.', 'prunestalled', dtc_queue_grid_id) }}
    {{ queue_macros.worker_method_button('Reset Stalled', 'dtc_queue_reset_stalled', workers_methods, 'This will reset (re-queue) all stalled jobs.', 'resetstalled', dtc_queue_grid_id) }}
    <script src="/bundles/dtcqueue/js/jobs.js?v=4"></script>
{% endblock %}
